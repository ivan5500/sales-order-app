"use strict";(self.webpackChunksales_order_app=self.webpackChunksales_order_app||[]).push([[8],{4008:(W,h,i)=>{i.r(h),i.d(h,{ListPageModule:()=>z});var d=i(6814),C=i(1363),l=i(6223),v=i(6889),Z=i(1896),t=i(5879),T=i(2202),u=i(7700),_=i(2296),p=i(5195),b=i(421);let A=(()=>{class e{constructor(){this.formatDate="dd/MM/yyyy"}ngOnInit(){if(!this.order)throw new Error("Order must be mandatory")}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["sales-order-card"]],inputs:{order:"order"},decls:49,vars:20,consts:[[1,"row","mb-2","mt-5"],[1,"col-sm-6","col-3"],[1,"col-sm-6","col"],[1,"row","mb-2"],[3,"items"],[1,"row","mb-2","justify-content-end"],[1,"col-sm-3","col-6"],[1,"col-sm-6","col-6"],[1,"col-6","col-sm-3"],[1,"col-6","col-sm-6"]],template:function(n,r){1&n&&(t.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title-group")(3,"mat-card-subtitle"),t._uU(4),t.qZA()()(),t.TgZ(5,"mat-card-content")(6,"div",0)(7,"div",1)(8,"b"),t._uU(9,"Customer:"),t.qZA()(),t.TgZ(10,"div",2),t._uU(11),t.qZA()(),t.TgZ(12,"div",3)(13,"div",1)(14,"b"),t._uU(15,"Creation Date:"),t.qZA()(),t.TgZ(16,"div",2),t._uU(17),t.ALo(18,"date"),t.qZA()(),t.TgZ(19,"div",3)(20,"div",1)(21,"b"),t._uU(22,"Cancellation Date:"),t.qZA()(),t.TgZ(23,"div",2),t._uU(24),t.ALo(25,"date"),t.qZA()(),t.TgZ(26,"div",3),t._UZ(27,"sales-order-item-table",4),t.qZA(),t.TgZ(28,"div",5)(29,"div",6)(30,"b"),t._uU(31,"Subtotal:"),t.qZA()(),t.TgZ(32,"div",7),t._uU(33),t.ALo(34,"currency"),t.qZA()(),t.TgZ(35,"div",5)(36,"div",6)(37,"b"),t._uU(38,"VAT:"),t.qZA()(),t.TgZ(39,"div",7),t._uU(40),t.ALo(41,"percent"),t.qZA()(),t.TgZ(42,"div",5)(43,"div",8)(44,"b"),t._uU(45,"Total:"),t.qZA()(),t.TgZ(46,"div",9),t._uU(47),t.ALo(48,"currency"),t.qZA()()()()),2&n&&(t.xp6(4),t.hij("ID: ",r.order.id,""),t.xp6(7),t.hij(" ",r.order.customer," "),t.xp6(6),t.hij(" ",t.xi3(18,8,r.order.creationDate,r.formatDate)," "),t.xp6(7),t.hij(" ",t.xi3(25,11,r.order.cancellationDate,r.formatDate)," "),t.xp6(3),t.Q6J("items",r.order.items),t.xp6(6),t.hij(" ",t.lcZ(34,14,r.order.subtotal)," "),t.xp6(7),t.hij(" ",t.lcZ(41,16,r.order.vat)," "),t.xp6(7),t.hij(" ",t.lcZ(48,18,r.order.total)," "))},dependencies:[p.a8,p.dn,p.dk,p.$j,p.C1,b.E,d.Zx,d.H9,d.uU]})}return e})(),y=(()=>{class e{constructor(o,n){this.dialogRef=o,this.data=n}onNoClick(){this.dialogRef.close()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(u.so),t.Y36(u.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-dialog-card"]],decls:7,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"order"],["mat-dialog-actions",""],["mat-button","",3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"Sales order"),t.qZA(),t.TgZ(2,"div",1),t._UZ(3,"sales-order-card",2),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return r.onNoClick()}),t._uU(6,"Close"),t.qZA()()),2&n&&(t.xp6(3),t.Q6J("order",r.data))},dependencies:[_.lW,u.uh,u.xY,u.H8,A]})}return e})();var s=i(5313);let D=(()=>{class e{constructor(o){this._salesOrderService=o,this.cancelEvent=new t.vpe(!1)}cancelOrder(){try{this._salesOrderService.cancelOrder(this.order),this.cancelEvent.emit(!0)}catch{this.cancelEvent.emit(!1)}}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(T.V))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["sales-order-cancel-btn"]],inputs:{order:"order"},outputs:{cancelEvent:"cancelEvent"},decls:2,vars:0,consts:[["mat-raised-button","","color","warn",3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return r.cancelOrder()}),t._uU(1,"Cancel"),t.qZA())},dependencies:[_.lW]})}return e})();function x(e,a){1&e&&(t.TgZ(0,"th",15),t._uU(1,"ID"),t.qZA())}function U(e,a){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.id)}}function w(e,a){1&e&&t._UZ(0,"td",17)}function F(e,a){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Customer"),t.qZA())}function L(e,a){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.customer)}}function q(e,a){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Creation Date"),t.qZA())}function N(e,a){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const o=a.$implicit,n=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,o.creationDate,n.formatDate)," ")}}function E(e,a){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Cancellation Date"),t.qZA())}function O(e,a){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const o=a.$implicit,n=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,o.cancellationDate,n.formatDate)," ")}}function Y(e,a){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Subtotal"),t.qZA())}function k(e,a){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,o.subtotal))}}function J(e,a){1&e&&(t.TgZ(0,"th",15),t._uU(1,"VAT"),t.qZA())}function S(e,a){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.ALo(2,"percent"),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,o.vat))}}function Q(e,a){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Total"),t.qZA())}function j(e,a){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,o.total))}}function B(e,a){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Actions"),t.qZA())}function R(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"sales-order-cancel-btn",20),t.NdJ("cancelEvent",function(r){t.CHM(o);const c=t.oxw(2);return t.KtG(c.cancelOrder(r))}),t.qZA()}if(2&e){const o=t.oxw().$implicit;t.Q6J("order",o)}}function M(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"td",16),t.YNc(1,R,1,1,"sales-order-cancel-btn",18),t.TgZ(2,"button",19),t.NdJ("click",function(){const c=t.CHM(o).$implicit,m=t.oxw();return t.KtG(m.showDetails(c))}),t._uU(3," Details "),t.qZA()()}if(2&e){const o=a.$implicit;t.xp6(1),t.Q6J("ngIf",!o.isCancel)}}function P(e,a){1&e&&t._UZ(0,"tr",21)}function I(e,a){1&e&&t._UZ(0,"tr",22)}let $=(()=>{class e{constructor(o){this.dialog=o,this.orders=[],this.formatDate="dd/MM/yyyy",this.displayedColumns=["id","customer","creationDate","cancellationDate","subtotal","vat","total","actions"]}ngOnInit(){console.log(this.orders)}cancelOrder(o){console.log(o)}showDetails(o){this.dialog.open(y,{data:o,width:"80%"}).afterClosed().subscribe(r=>{console.log("The dialog was closed")})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(u.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["sales-order-list-table"]],inputs:{orders:"orders"},decls:29,vars:4,consts:[[1,"order-table-container","mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","customer"],["matColumnDef","creationDate"],["matColumnDef","cancellationDate"],["matColumnDef","subtotal"],["matColumnDef","vat"],["matColumnDef","total"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-footer-cell",""],[3,"order","cancelEvent",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[3,"order","cancelEvent"],["mat-header-row",""],["mat-row",""]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"table",1),t.ynx(2,2),t.YNc(3,x,2,0,"th",3),t.YNc(4,U,2,1,"td",4),t.YNc(5,w,1,0,"td",5),t.BQk(),t.ynx(6,6),t.YNc(7,F,2,0,"th",3),t.YNc(8,L,2,1,"td",4),t.BQk(),t.ynx(9,7),t.YNc(10,q,2,0,"th",3),t.YNc(11,N,3,4,"td",4),t.BQk(),t.ynx(12,8),t.YNc(13,E,2,0,"th",3),t.YNc(14,O,3,4,"td",4),t.BQk(),t.ynx(15,9),t.YNc(16,Y,2,0,"th",3),t.YNc(17,k,3,3,"td",4),t.BQk(),t.ynx(18,10),t.YNc(19,J,2,0,"th",3),t.YNc(20,S,3,3,"td",4),t.BQk(),t.ynx(21,11),t.YNc(22,Q,2,0,"th",3),t.YNc(23,j,3,3,"td",4),t.BQk(),t.ynx(24,12),t.YNc(25,B,2,0,"th",3),t.YNc(26,M,4,1,"td",4),t.BQk(),t.YNc(27,P,1,0,"tr",13),t.YNc(28,I,1,0,"tr",14),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("dataSource",r.orders),t.xp6(26),t.Q6J("matHeaderRowDef",r.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns))},dependencies:[d.O5,_.lW,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.mD,s.ge,s.ev,s.yh,s.XQ,s.Gk,D,d.Zx,d.H9,d.uU],styles:[".order-table-container[_ngcontent-%COMP%]{overflow:auto}tr.mat-footer-row[_ngcontent-%COMP%]{font-weight:700}.mat-table-sticky[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0}"]})}return e})();var f=i(8034),g=i(9157);let H=(()=>{class e{constructor(){this.addFilterEvent=new t.vpe,this.resetFilterEvent=new t.vpe,this.maxDate=new Date,this.filterForm=new l.cw({rangeCreationDate:new l.cw({start:new l.NI({value:null,disabled:!0}),end:new l.NI({value:null,disabled:!0})}),rangeCancellDate:new l.cw({start:new l.NI({value:null,disabled:!0}),end:new l.NI({value:null,disabled:!0})})})}onSubmit(){if(this._isEmptyForm())return;const o=this.filterForm.value;console.log(o),this.addFilterEvent.emit(o)}onReset(){this.filterForm.reset(),this.resetFilterEvent.emit(!0)}_isEmptyForm(){return!(this.filterForm.value.rangeCreationDate?.end||this.filterForm.value.rangeCancellDate?.end)}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["sales-order-filter-form"]],outputs:{addFilterEvent:"addFilterEvent",resetFilterEvent:"resetFilterEvent"},decls:26,vars:7,consts:[[3,"formGroup","ngSubmit"],["formGroupName","rangeCreationDate",1,"w-100","mb-2"],[3,"rangePicker","max"],["matStartDate","","placeholder","Start date","formControlName","start"],["matEndDate","","placeholder","End date","formControlName","end"],["matIconSuffix","",3,"for"],["disabled","false"],["pickerCreation",""],["formGroupName","rangeCancellDate",1,"w-100","mb-2"],["pickerCancellation",""],[1,"row"],[1,"col"],["mat-stroked-button","","color","primary","type","button",3,"click"],["id","filter-btn",1,"col"],["mat-raised-button","","color","primary","type","submit"]],template:function(n,r){if(1&n&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return r.onSubmit()}),t.TgZ(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"Creation date"),t.qZA(),t.TgZ(4,"mat-date-range-input",2),t._UZ(5,"input",3)(6,"input",4),t.qZA(),t._UZ(7,"mat-datepicker-toggle",5)(8,"mat-date-range-picker",6,7),t.qZA(),t.TgZ(10,"mat-form-field",8)(11,"mat-label"),t._uU(12,"Cancellation date"),t.qZA(),t.TgZ(13,"mat-date-range-input",2),t._UZ(14,"input",3)(15,"input",4),t.qZA(),t._UZ(16,"mat-datepicker-toggle",5)(17,"mat-date-range-picker",6,9),t.qZA(),t.TgZ(19,"div",10)(20,"div",11)(21,"button",12),t.NdJ("click",function(){return r.onReset()}),t._uU(22," Reset "),t.qZA()(),t.TgZ(23,"div",13)(24,"button",14),t._uU(25,"Filter"),t.qZA()()()()),2&n){const c=t.MAs(9),m=t.MAs(18);t.Q6J("formGroup",r.filterForm),t.xp6(4),t.Q6J("rangePicker",c)("max",r.maxDate),t.xp6(3),t.Q6J("for",c),t.xp6(6),t.Q6J("rangePicker",m)("max",r.maxDate),t.xp6(3),t.Q6J("for",m)}},dependencies:[f.nW,f.wx,f.zY,f.By,f._g,g.KE,g.hX,g.R9,_.lW,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,l.x0],styles:["#filter-btn[_ngcontent-%COMP%]{text-align:right}"]})}return e})();const X=[{path:"",component:(()=>{class e{constructor(o){this._salesOrderService=o,this.orders=[]}ngOnInit(){this.orders=this._salesOrderService.getOrders()}addFilter(o){this.orders=this._salesOrderService.filterOrders(o)}removeFilter(o){this.orders=this._salesOrderService.getOrders()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(T.V))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["sales-order-list-page"]],decls:10,vars:1,consts:[[1,"container"],[1,"row","text-center"],[1,"row","justify-content-center","mb-3"],[1,"col-sm-12","col-md-5","col-lg-4"],[3,"addFilterEvent","resetFilterEvent"],[1,"row","justify-content-center"],[1,"col-sm-12","col-md-12","col-lg-10"],[3,"orders"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1"),t._uU(3,"Sale Order List"),t.qZA()(),t.TgZ(4,"div",2)(5,"div",3)(6,"sales-order-filter-form",4),t.NdJ("addFilterEvent",function(m){return r.addFilter(m)})("resetFilterEvent",function(m){return r.removeFilter(m)}),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6),t._UZ(9,"sales-order-list-table",7),t.qZA()()()),2&n&&(t.xp6(9),t.Q6J("orders",r.orders))},dependencies:[$,H]})}return e})()},{path:"**",redirectTo:""}];let G=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[Z.Bz.forChild(X),Z.Bz]})}return e})(),z=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[d.ez,G,v.q,l.UX,C.O]})}return e})()}}]);